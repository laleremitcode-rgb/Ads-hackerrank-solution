#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_OPERATIONS 1000000
#define MAX_STRING_LENGTH 1000000

typedef struct {
    char* data;
    int length;
} State;

int main() {
    int q;
    scanf("%d", &q);
    
    // Stack for undo operations
    State* stack = (State*)malloc(MAX_OPERATIONS * sizeof(State));
    int stack_top = -1;
    
    // Current string
    char* s = (char*)malloc(MAX_STRING_LENGTH * sizeof(char));
    s[0] = '\0';
    int s_length = 0;
    
    for (int i = 0; i < q; i++) {
        int operation;
        scanf("%d", &operation);
        
        if (operation == 1) { // Append
            char w[1000000];
            scanf("%s", w);
            int w_length = strlen(w);
            
            // Save current state for undo
            stack_top++;
            stack[stack_top].data = (char*)malloc((s_length + 1) * sizeof(char));
            strcpy(stack[stack_top].data, s);
            stack[stack_top].length = s_length;
            
            // Append new string
            strcat(s, w);
            s_length += w_length;
            
        } else if (operation == 2) { // Delete
            int k;
            scanf("%d", &k);
            
            // Save current state for undo
            stack_top++;
            stack[stack_top].data = (char*)malloc((s_length + 1) * sizeof(char));
            strcpy(stack[stack_top].data, s);
            stack[stack_top].length = s_length;
            
            // Delete last k characters
            s_length -= k;
            s[s_length] = '\0';
            
        } else if (operation == 3) { // Print
            int k;
            scanf("%d", &k);
            printf("%c\n", s[k - 1]);
            
        } else if (operation == 4) { // Undo
            if (stack_top >= 0) {
                // Restore previous state
                strcpy(s, stack[stack_top].data);
                s_length = stack[stack_top].length;
                free(stack[stack_top].data);
                stack_top--;
            }
        }
    }
    
    // Free memory
    free(s);
    for (int i = 0; i <= stack_top; i++) {
        free(stack[i].data);
    }
    free(stack);
    
    return 0;
}
